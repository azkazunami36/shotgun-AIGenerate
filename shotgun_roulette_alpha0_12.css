:root{
    --bg:#111; --panel:#1b1b1b; --sub:#141414; --text:#eee; --muted:#bbb;
    --chip:#222; --accent:#1b5b3b; --danger:#5b1b1b;
    --bg-image:none; --panel-image:none; --flash-color:#ffffff;
  }
  *{box-sizing:border-box;}
  body{
    font-family: "Yu Gothic UI", "Hiragino Kaku Gothic ProN", "Meiryo", system-ui, sans-serif;
    background:var(--bg);
    background-image: var(--bg-image);
    background-size:cover; background-position:center; background-attachment:fixed;
    color:var(--text); padding:16px; margin:0;
  }
  h1{margin:0 0 12px 0; font-size:20px;}
  .controls, .game {display:flex; gap:16px; margin-bottom:12px; flex-wrap:wrap;}
  .panel{
    background:var(--panel);
    background-image: var(--panel-image);
    background-size:cover; background-position:center;
    padding:12px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.6); min-width:220px;
  }
  label{display:block; margin-bottom:6px; font-size:13px; color:#ccc;}
  input, select, button{padding:6px 8px; border-radius:6px; border:1px solid #333; background:#121212; color:var(--text);}
  button{cursor:pointer;}
  .players{display:flex; gap:12px; flex-wrap:wrap;}
  .player{padding:8px; border-radius:6px; background:var(--sub); min-width:200px; display:grid; grid-template-columns:48px 1fr; grid-gap:8px; align-items:center;}
  .player.dead{opacity:0.35; text-decoration:line-through;}
  .avatar{width:48px; height:48px; border-radius:6px; background:#000 center/cover no-repeat;}
  .hp{font-weight:700; color:#ffb3b3;}
  .items{margin-top:8px;}
  .item{display:inline-flex; align-items:center; gap:6px; padding:4px 6px; margin:4px 4px 0 0; background:var(--chip); border-radius:6px; font-size:13px;}
  .item .icon{width:16px; height:16px; background:center/cover no-repeat;}
  .log{height:240px; overflow:auto; background:#0f0f0f; padding:8px; border-radius:6px; font-size:13px;}
  .chamber{font-size:13px; color:#ccc; margin-top:8px;}
  .big{font-size:16px;}
  .actions{margin-top:8px; display:flex; gap:8px; flex-wrap:wrap;}
  .target-select{width:100%;}
  .peek-indicator{font-weight:700; color:#ffd27f;}
  footer{margin-top:12px; font-size:12px; color:#888;}
  .btn-danger{background:var(--danger);}
  .btn-primary{background:var(--accent);}
  .toolbar{display:flex; gap:8px; align-items:center; margin-bottom:8px; flex-wrap:wrap;}

  /* タイトル */
  #titleScreen{
    position:fixed; inset:0; z-index:1000;
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    background:radial-gradient(1200px 800px at 50% 40%, #222 0%, #000 70%);
    color:#f5f5f5; text-align:center;
  }
  #titleScreen h1{font-size:40px; letter-spacing:1px; margin:0;}
  #titleScreen p{margin:8px 0 0 0; color:#d0d0d0;}
  #startBtnTitle{margin-top:24px; padding:12px 24px; font-size:18px; border:1px solid #333; background:#162b22;}

  /* フラッシュ */
  #flashOverlay{ position:fixed; inset:0; background:var(--flash-color); opacity:0; pointer-events:none; z-index:999; }
  @keyframes flashEffect{ 0%{opacity:0;} 15%{opacity:1;} 100%{opacity:0;} }

  /* 設定モーダル */
  #settingsModal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:1100; }
  #settingsBackdrop{position:absolute; inset:0; background:rgba(0,0,0,0.6);}
  #settingsPanel{position:relative; background:#1a1a1a; border:1px solid #333; border-radius:10px; padding:16px; width:min(980px,94vw); max-height:90vh; overflow:auto; box-shadow:0 10px 40px rgba(0,0,0,0.8);}
  #settingsPanel h2{margin:0 0 8px 0; font-size:18px;}
  .grid{display:grid; grid-template-columns:1fr 1fr; gap:12px;}
  .row{display:flex; gap:8px; align-items:center; flex-wrap:wrap;}
  .preview{width:100%; height:120px; background:#000 center/cover no-repeat; border-radius:6px; border:1px solid #333;}
  .help{font-size:12px; color:#aaa;}
  .small{font-size:12px;}
  .icon-preview{width:24px; height:24px; background:#000 center/cover no-repeat; border-radius:4px; border:1px solid #333; display:inline-block; vertical-align:middle;}

  /* 音量スライダー */
  .volrow{display:flex; align-items:center; gap:8px;}
  .volrow input[type=range]{flex:1;}